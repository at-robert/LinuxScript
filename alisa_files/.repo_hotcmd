# repo alias functions:
alias repobra='repo branches'
alias repob='repo branches'
alias repostashl='repo forall -p -c "git stash list"'
alias repos='repo status'
alias repoa='repo forall -c "git bra"'

function repock(){
    if [ "$1" == "" ];
    then
        echo "The usage : repock BRANCH_NAME"
    elif [[ "$1" == "mtk" ]]; then
        repo checkout alps-release-l0-audio.tc17
    else
        repo checkout $1
    fi
    repob
}

function repopull(){
    if [ "$1" == "" ];
    then
        echo "The usage : repopull BRANCH_NAME"
    else
        repo forall -c "git pull l0_audio $1"
    fi
}

function repopush(){
    if [ "$1" == "" ];
    then
        echo "The usage : repopush BRANCH_NAME"
    else
        repo forall -c "git push l0_audio $1"
    fi
}

function repomerge(){
    if [ "$1" == "" ];
    then
        echo "The usage : repomerge BRANCH_NAME"
    else
        repo forall -c "git merge $1"
    fi
}

function repol(){
    
    if [ "$1" == "" ] && [ "$2" == "" ];
    then
        PNOW=$(date --date='1 days ago' "+%Y-%m-%d")
        CMD="git log --pretty=format:\"%h - %an, %ar : %s\" --name-status --since=$PNOW"
    elif [ "$2" == "" ];
    then
        PNOW=$(date --date=$1' days ago' "+%Y-%m-%d")
        CMD="git log --pretty=format:\"%h - %an, %ar : %s\" --name-status --since=$PNOW"   
    else
        PNOW=$(date --date=$1' days ago' "+%Y-%m-%d")
        CMD="git log --pretty=format:\"%h - %an, %ar : %s\" --name-status --since=$PNOW --author=$2"
    fi
    
    echo "Git LOG Since $CMD"
    repo forall -p -c "$CMD"
}

function repols(){
    if [ "$1" == "" ] && [ "$2" == "" ];
    then
        CMD="git log --pretty=format:\"%h - %an, %ar : %s\" --name-status"
    elif [ "$2" == "" ];
    then
        CMD="git log --pretty=format:\"%h - %an, %ar : %s\" --name-status --since=$1"
    else
        CMD="git log --pretty=format:\"%h - %an, %ar : %s\" --name-status --since=$1 --author=$2"
    fi
    echo "Git LOG Since $CMD"
    repo forall -p -c "$CMD"
}

function repolsd(){
    if [ "$1" == "" ] && [ "$2" == "" ];
    then
        CMD="git log --pretty=format:\"%h - %an, %cd : %s\" --name-status"
    elif [ "$2" == "" ];
    then
        CMD="git log --pretty=format:\"%h - %an, %cd : %s\" --name-status --since=$1"
    else
        CMD="git log --pretty=format:\"%h - %an, %cd : %s\" --name-status --since=$1 --author=$2"
    fi
    echo "Git LOG Since $CMD"
    repo forall -p -c "$CMD"
}

function repofs(){
    echo "Repo First Sync for MTK8516"
    repo sync -j4 -c --no-clone-bundle 
    repo forall -c "git fetch --all"
    repo forall -c "git checkout --track l0_audio/alps-release-l0-audio.tc17"
    repo forall -c "git checkout --track l0_audio/amt-dev"
}